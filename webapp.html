<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Attend</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .camera-view { position: relative; overflow: hidden; }
        .camera-view video { width: 100%; height: 100%; object-fit: cover; }
        @keyframes scan { 0% { transform: translateY(-100%); } 100% { transform: translateY(100%); } }
        .scan-line { position: absolute; left: 0; width: 150%; height: 7px; background: linear-gradient(90deg, transparent, #34d399, transparent); animation: scan 3s linear infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.6; } }
        .pulse-text { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        ::-webkit-scrollbar { display: none; }
        html { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="bg-gray-100 h-screen flex flex-col">

    <div id="loading-screen" class="fixed inset-0 bg-indigo-600 flex flex-col items-center justify-center z-50">
        <i class="fas fa-school text-white text-5xl mb-4"></i>
        <h1 class="text-white text-2xl font-bold pulse-text">Smart Attend is starting...</h1>
    </div>

    <div id="role-selection-screen" class="flex-grow flex-col items-center justify-center p-6 hidden">
        <div class="text-center mb-12">
            <i class="fas fa-school text-indigo-500 text-5xl mb-4"></i>
            <h1 class="text-3xl font-bold text-gray-800">Welcome to Smart Attend</h1>
            <p class="text-gray-500 mt-2">Please select your role to continue.</p>
        </div>
        <div class="w-full max-w-sm space-y-4">
            <button onclick="app.selectRole('teacher')" class="w-full bg-indigo-600 text-white p-5 rounded-lg shadow-lg flex items-center justify-center text-xl hover:bg-indigo-700 transition-all transform hover:scale-105">
                <i class="fas fa-chalkboard-teacher mr-4"></i>
                Teacher's Module
            </button>
            <button onclick="app.selectRole('student')" class="w-full bg-green-500 text-white p-5 rounded-lg shadow-lg flex items-center justify-center text-xl hover:bg-green-600 transition-all transform hover:scale-105">
                <i class="fas fa-user-graduate mr-4"></i>
                Student's Module
            </button>
        </div>
    </div>
    
    <div id="teacher-module" class="hidden h-full">
        <main class="flex-grow overflow-y-auto pb-20">
            <div id="home-screen" class="p-6">...</div>
            <div id="enroll-screen" class="p-6 hidden">...</div>
            <div id="attendance-screen" class="p-6 hidden">...</div>
            <div id="students-screen" class="p-6 hidden">...</div>
            <div id="records-screen" class="p-6 hidden">...</div>
        </main>
        <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 flex justify-around shadow-inner">
            </nav>
    </div>

    <div id="student-module" class="hidden h-full">
        <main class="flex-grow overflow-y-auto pb-20 p-6">
            <div id="student-login-screen">...</div>
            <div id="student-enroll-screen" class="hidden">...</div>
            <div id="student-dashboard-screen" class="hidden">...</div>
            <div id="student-attendance-screen" class="hidden">...</div>
            <div id="student-classmates-screen" class="hidden">...</div>
        </main>
    </div>

    <div id="toast" class="fixed bottom-24 right-4 bg-gray-900 text-white px-5 py-2 rounded-lg shadow-xl opacity-0 transition-opacity duration-300">
        <p id="toast-message"></p>
    </div>


<script>
const app = {
    
    students: [],
    attendanceRecords: [],
    videoStream: null,
    loggedInStudent: null,

    
    init() {
        this.loadData();
        this.injectHTML();
        this.attachEventListeners();

        const loadingScreen = document.getElementById('loading-screen');
        const roleScreen = document.getElementById('role-selection-screen');

        setTimeout(() => {
            loadingScreen.style.display = 'none';
            roleScreen.classList.remove('hidden');
            roleScreen.classList.add('flex');
        }, 3000);
    },

    loadData() {
        this.students = JSON.parse(localStorage.getItem('students')) || [];
        this.attendanceRecords = JSON.parse(localStorage.getItem('attendanceRecords')) || [];
    },

    saveData() {
        localStorage.setItem('students', JSON.stringify(this.students));
        localStorage.setItem('attendanceRecords', JSON.stringify(this.attendanceRecords));
    },

    selectRole(role) {
        document.getElementById('role-selection-screen').classList.add('hidden');
        if (role === 'teacher') {
            document.getElementById('teacher-module').classList.remove('hidden');
            this.navigate('home-screen');
        } else {
            document.getElementById('student-module').classList.remove('hidden');
            this.studentNavigate('student-login-screen');
        }
    },

    goBackToRoleSelection() {
        this.stopCamera();
        this.loggedInStudent = null;
        document.getElementById('teacher-module').classList.add('hidden');
        document.getElementById('student-module').classList.add('hidden');
        const roleScreen = document.getElementById('role-selection-screen');
        roleScreen.classList.remove('hidden');
        roleScreen.classList.add('flex');
    },

    showToast(message, duration = 3000) {
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');
        toastMessage.textContent = message;
        toast.classList.remove('opacity-0');
        setTimeout(() => { toast.classList.add('opacity-0'); }, duration);
    },

    
    async startCamera(videoId) {
        const videoElement = document.getElementById(videoId);
        const placeholder = document.getElementById(videoId.replace('video', 'cam-placeholder'));
        try {
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                this.videoStream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } });
                videoElement.srcObject = this.videoStream;
                videoElement.classList.remove('hidden');
                placeholder.classList.add('hidden');
            }
        } catch (error) {
            console.error("Error accessing camera:", error);
            placeholder.textContent = 'Could not access camera.';
        }
    },

    stopCamera() {
        if (this.videoStream) {
            this.videoStream.getTracks().forEach(track => track.stop());
            this.videoStream = null;
        }
    },
    
    //TEACHER MODULE
    navigate(pageId) {
        this.stopCamera();
        document.querySelectorAll('#teacher-module main > div').forEach(div => div.classList.add('hidden'));
        document.getElementById(pageId).classList.remove('hidden');

        document.querySelectorAll('#teacher-module .nav-btn').forEach(btn => btn.classList.replace('text-indigo-600', 'text-gray-500'));
        const activeBtn = document.querySelector(`#teacher-module button[onclick="app.navigate('${pageId}')"]`);
        if (activeBtn) activeBtn.classList.replace('text-gray-500', 'text-indigo-600');

        if (pageId === 'home-screen') this.updateDashboard();
        if (pageId === 'records-screen') this.renderRecords();
        if (pageId === 'students-screen') this.renderStudents();
        if (pageId === 'enroll-screen' || pageId === 'attendance-screen') {
            this.startCamera(pageId === 'enroll-screen' ? 'enroll-video' : 'attendance-video');
        }
    },

    updateDashboard() {
        document.getElementById('total-students').textContent = this.students.length;
        const today = new Date().toLocaleDateString();
        const todayRecord = this.attendanceRecords.find(r => r.date === today);
        document.getElementById('today-present').textContent = todayRecord ? todayRecord.present.length : 0;
    },
    
    enrollStudent(name, roll) {
        if (!name || !roll) {
            this.showToast('Please enter both name and roll number.');
            return false;
        }
        if (this.students.some(s => s.roll === roll)) {
            this.showToast('A student with this roll number already exists.');
            return false;
        }
        const newStudent = { id: Date.now(), name, roll };
        this.students.push(newStudent);
        this.saveData();
        this.updateDashboard();
        return newStudent;
    },

    takeAttendance() {
        const scanButton = document.getElementById('scan-button');
        const scanStatus = document.getElementById('scan-status');
        const resultsDiv = document.getElementById('attendance-results');
        const presentListDiv = document.getElementById('present-list');
        const scanLine = document.getElementById('scan-line-container');

        if (this.students.length === 0) {
            this.showToast('No students enrolled. Please enroll students first.');
            return;
        }
        scanButton.disabled = true;
        scanButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Scanning...';
        scanStatus.textContent = 'Scanning classroom...';
        resultsDiv.classList.remove('hidden');
        presentListDiv.innerHTML = '';
        scanLine.classList.remove('hidden');
      
        setTimeout(() => {
            const presentStudents = this.students.filter(() => Math.random() > 0.3);
            const today = new Date().toLocaleDateString();

            let todayRecord = this.attendanceRecords.find(r => r.date === today);
            if (todayRecord) {
                todayRecord.present = [...new Set([...todayRecord.present, ...presentStudents.map(s => s.id)])];
            } else {
                todayRecord = { date: today, present: presentStudents.map(s => s.id) };
                this.attendanceRecords.push(todayRecord);
            }
            this.saveData();
            this.updateDashboard();

            scanStatus.textContent = `Found ${presentStudents.length} of ${this.students.length} students.`;
            const allStudentsSorted = [...this.students].sort((a,b) => a.name.localeCompare(b.name));
            allStudentsSorted.forEach(student => {
                const isPresent = presentStudents.some(p => p.id === student.id);
                if (isPresent) {
                    presentListDiv.innerHTML += `<div class="bg-green-100 text-green-800 p-2 rounded-md mt-1">${student.name} (${student.roll}) - Present</div>`;
                } else {
                     presentListDiv.innerHTML += `<div class="bg-red-100 text-red-800 p-2 rounded-md mt-1">${student.name} (${student.roll}) - Absent</div>`;
                }
            });

            scanButton.disabled = false;
            scanButton.innerHTML = '<i class="fas fa-qrcode mr-2"></i> Scan Again';
            scanLine.classList.add('hidden');
            this.showToast('Attendance saved for today!');
        }, 3000); 
    },

    renderStudents() {
        const listDiv = document.getElementById('students-list');
        listDiv.innerHTML = '';
        if (this.students.length === 0) {
            listDiv.innerHTML = '<p class="text-gray-500 text-center mt-4">No students have been enrolled yet.</p>';
            return;
        }
        const sortedStudents = [...this.students].sort((a, b) => a.name.localeCompare(b.name));
        sortedStudents.forEach(student => {
            listDiv.innerHTML += `
                <div class="bg-white p-4 rounded-lg shadow-sm flex justify-between items-center">
                    <div>
                        <p class="font-bold text-gray-800">${student.name}</p>
                        <p class="text-sm text-gray-500">Roll No: ${student.roll}</p>
                    </div>
                    <button data-id="${student.id}" class="delete-student-btn text-red-500 hover:text-red-700"> <i class="fas fa-trash-alt fa-lg"></i> </button>
                </div>
            `;
        });
    },

    deleteStudent(studentId) {
        const studentToDelete = this.students.find(s => s.id === studentId);
        if (!studentToDelete) return;

        if (confirm(`Are you sure you want to delete ${studentToDelete.name}?`)) {
            this.students = this.students.filter(s => s.id !== studentId);
            this.attendanceRecords.forEach(record => {
                record.present = record.present.filter(id => id !== studentId);
            });
            this.saveData();
            this.renderStudents();
            this.updateDashboard();
            this.showToast(`${studentToDelete.name} has been deleted.`);
        }
    },
    
    renderRecords() {
        const listDiv = document.getElementById('records-list');
        listDiv.innerHTML = '';
        if (this.attendanceRecords.length === 0) {
            listDiv.innerHTML = '<p class="text-gray-500 text-center mt-4">No attendance records found.</p>';
            return;
        }
        [...this.attendanceRecords].reverse().forEach(record => {
            const presentCount = record.present.length;
            const absentCount = this.students.length - presentCount;
            listDiv.innerHTML += `
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="flex justify-between items-center">
                        <p class="font-bold text-lg text-gray-800">${record.date}</p>
                        <div class="flex space-x-4">
                            <span class="text-green-600 font-semibold">Present: ${presentCount}</span>
                            <span class="text-red-600 font-semibold">Absent: ${absentCount > 0 ? absentCount : 0}</span>
                        </div>
                    </div>
                </div>
            `;
        });
    },

    //STUDENT MODULE
    studentNavigate(pageId) {
        this.stopCamera();
        document.querySelectorAll('#student-module main > div').forEach(div => div.classList.add('hidden'));
        document.getElementById(pageId).classList.remove('hidden');

        if (pageId === 'student-login-screen') this.renderStudentLogin();
        if (pageId === 'student-dashboard-screen') this.renderStudentDashboard();
        if (pageId === 'student-attendance-screen') this.renderMyAttendance();
        if (pageId === 'student-classmates-screen') this.renderClassmates();
        if (pageId === 'student-enroll-screen') this.startCamera('student-enroll-video');
    },

    renderStudentLogin() {
        const container = document.getElementById('student-login-screen');
        let options = this.students.length > 0 ? '<option value="">-- Select your name --</option>' : '<option value="">-- No students enrolled --</option>';
        [...this.students].sort((a,b) => a.name.localeCompare(b.name)).forEach(s => {
            options += `<option value="${s.id}">${s.name} (${s.roll})</option>`;
        });
        container.innerHTML = `
            <div class="w-full max-w-md mx-auto">
                <div class="text-center mb-8">
                    <i class="fas fa-user-graduate text-green-500 text-4xl"></i>
                    <h1 class="text-3xl font-bold text-gray-800 mt-4">Student Portal</h1>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <label for="student-select" class="block text-sm font-medium text-gray-700 mb-2">Existing Student?</label>
                    <select id="student-select" class="block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm">${options}</select>
                    <button id="student-login-btn" class="mt-4 w-full bg-green-500 text-white p-3 rounded-lg font-semibold hover:bg-green-600">Login</button>
                    <div class="my-4 text-center text-gray-500">OR</div>
                    <button onclick="app.studentNavigate('student-enroll-screen')" class="w-full bg-indigo-500 text-white p-3 rounded-lg font-semibold hover:bg-indigo-600">Enroll as a New Student</button>
                </div>
                 <button onclick="app.goBackToRoleSelection()" class="w-full mt-6 text-indigo-600 hover:underline">
                    <i class="fas fa-arrow-left mr-2"></i>Back to Role Selection
                </button>
            </div>
        `;
    },

    loginStudent(studentId) {
        if (!studentId) {
            this.showToast("Please select your name to log in.");
            return;
        }
        this.loggedInStudent = this.students.find(s => s.id === parseInt(studentId));
        if (this.loggedInStudent) {
            this.studentNavigate('student-dashboard-screen');
        }
    },
    
    renderStudentDashboard() {
        if (!this.loggedInStudent) return;
        document.getElementById('student-dashboard-screen').innerHTML = `
            <div>
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-800">Welcome, ${this.loggedInStudent.name}!</h1>
                        <p class="text-gray-500">Roll No: ${this.loggedInStudent.roll}</p>
                    </div>
                    <button onclick="app.studentNavigate('student-login-screen')" class="text-indigo-600 hover:underline">Logout</button>
                </div>
                <div class="space-y-4">
                    <button onclick="app.studentNavigate('student-attendance-screen')" class="w-full bg-green-500 text-white p-4 rounded-lg shadow-md flex items-center justify-center text-lg hover:bg-green-600">
                        <i class="fas fa-calendar-check mr-3"></i> View My Attendance
                    </button>
                    <button onclick="app.studentNavigate('student-classmates-screen')" class="w-full bg-blue-500 text-white p-4 rounded-lg shadow-md flex items-center justify-center text-lg hover:bg-blue-600">
                        <i class="fas fa-users mr-3"></i> View Classmates
                    </button>
                </div>
            </div>
        `;
    },

    renderMyAttendance() {
        if (!this.loggedInStudent) return;
        const container = document.getElementById('student-attendance-screen');
        let content = '';
        if (this.attendanceRecords.length === 0) {
            content = '<p class="text-gray-500 text-center">No attendance has been recorded yet.</p>';
        } else {
            [...this.attendanceRecords].reverse().forEach(record => {
                const isPresent = record.present.includes(this.loggedInStudent.id);
                content += `
                    <div class="bg-white p-3 rounded-lg shadow-sm flex justify-between items-center">
                        <p class="font-semibold text-gray-700">${record.date}</p>
                        ${isPresent
                            ? '<span class="px-3 py-1 text-sm font-semibold text-green-800 bg-green-200 rounded-full">Present</span>'
                            : '<span class="px-3 py-1 text-sm font-semibold text-red-800 bg-red-200 rounded-full">Absent</span>'
                        }
                    </div>
                `;
            });
        }
        container.innerHTML = `
            <div>
                <button onclick="app.studentNavigate('student-dashboard-screen')" class="text-indigo-600 mb-4 inline-block hover:underline"><i class="fas fa-arrow-left mr-2"></i>Back to Dashboard</button>
                <h1 class="text-2xl font-bold text-gray-800 mb-4">My Attendance History</h1>
                <div class="space-y-3">${content}</div>
            </div>
        `;
    },

    renderClassmates() {
        const container = document.getElementById('student-classmates-screen');
        let content = '';
        const sortedStudents = [...this.students].sort((a,b) => a.name.localeCompare(b.name));
        sortedStudents.forEach(student => {
            content += `
                <div class="bg-white p-3 rounded-lg shadow-sm">
                    <p class="font-semibold text-gray-800">${student.name} <span class="text-gray-500 font-normal">(${student.roll})</span></p>
                </div>
            `;
        });
        container.innerHTML = `
            <div>
                <button onclick="app.studentNavigate('student-dashboard-screen')" class="text-indigo-600 mb-4 inline-block hover:underline"><i class="fas fa-arrow-left mr-2"></i>Back to Dashboard</button>
                <h1 class="text-2xl font-bold text-gray-800 mb-4">My Classmates</h1>
                <div class="space-y-3">${content}</div>
            </div>
        `;
    },
    
    //EVENT LISTENERS
    attachEventListeners() {
        // Teacher module listeners
        document.getElementById('teacher-module').addEventListener('click', (e) => {
            if (e.target.closest('#enroll-button')) {
                const name = document.getElementById('student-name').value.trim();
                const roll = document.getElementById('roll-number').value.trim();
                if(this.enrollStudent(name, roll)) {
                    this.showToast(`${name} has been enrolled successfully!`);
                    document.getElementById('student-name').value = '';
                    document.getElementById('roll-number').value = '';
                }
            }
            if (e.target.closest('#scan-button')) this.takeAttendance();
            if (e.target.closest('#clear-records-btn')) {
                if(confirm('Are you sure you want to delete all attendance records?')) {
                    this.attendanceRecords = []; this.saveData(); this.renderRecords();
                    this.showToast('All records deleted.');
                }
            }
            const deleteBtn = e.target.closest('.delete-student-btn');
            if(deleteBtn) this.deleteStudent(parseInt(deleteBtn.dataset.id));
        });

        // Student module listeners
        document.getElementById('student-module').addEventListener('click', (e) => {
            if (e.target.closest('#student-login-btn')) {
                const selectedId = document.getElementById('student-select').value;
                this.loginStudent(selectedId);
            }
            if (e.target.closest('#student-enroll-btn')) {
                const name = document.getElementById('student-enroll-name').value.trim();
                const roll = document.getElementById('student-enroll-roll').value.trim();
                const newStudent = this.enrollStudent(name, roll);
                if (newStudent) {
                    this.showToast(`Welcome, ${name}! You have been enrolled.`);
                    this.loggedInStudent = newStudent;
                    this.studentNavigate('student-dashboard-screen');
                }
            }
        });
    },

    //HTML INJECT (for readable structure)
    injectHTML() {
        // Teacher - Home
        document.getElementById('home-screen').innerHTML = `
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h1 class="text-2xl font-bold text-gray-800">Attendance Dashboard</h1>
                    <p class="text-gray-500">Welcome, Teacher!</p>
                </div>
                <button onclick="app.goBackToRoleSelection()" class="text-indigo-600 hover:underline">
                    <i class="fas fa-arrow-left mr-2"></i>Switch Role
                </button>
            </div>
            <div class="grid grid-cols-2 gap-4">
                <div class="bg-white p-4 rounded-lg shadow-sm text-center"><p class="text-3xl font-bold text-indigo-600" id="total-students">0</p><p class="text-gray-500 text-sm">Total Students</p></div>
                <div class="bg-white p-4 rounded-lg shadow-sm text-center"><p class="text-3xl font-bold text-green-500" id="today-present">0</p><p class="text-gray-500 text-sm">Present Today</p></div>
            </div>
            <h2 class="text-xl font-bold text-gray-700 mt-8 mb-4">Quick Actions</h2>
            <div class="space-y-4">
                <button onclick="app.navigate('attendance-screen')" class="w-full bg-indigo-600 text-white p-4 rounded-lg shadow-md flex items-center justify-center text-lg hover:bg-indigo-700"><i class="fas fa-camera mr-3"></i>Take Attendance</button>
                <button onclick="app.navigate('enroll-screen')" class="w-full bg-green-500 text-white p-4 rounded-lg shadow-md flex items-center justify-center text-lg hover:bg-green-600"><i class="fas fa-user-plus mr-3"></i>Enroll Student</button>
                <button onclick="app.navigate('students-screen')" class="w-full bg-blue-500 text-white p-4 rounded-lg shadow-md flex items-center justify-center text-lg hover:bg-blue-600"><i class="fas fa-users mr-3"></i>View Students</button>
                <button onclick="app.navigate('records-screen')" class="w-full bg-white text-gray-700 p-4 rounded-lg shadow-sm flex items-center justify-center text-lg border border-gray-200 hover:bg-gray-50"><i class="fas fa-list-alt mr-3"></i>Attendance Records</button>
            </div>`;
        // Teacher - Enroll
        document.getElementById('enroll-screen').innerHTML = `<h1 class="text-2xl font-bold text-gray-800 mb-4">Enroll New Student</h1><div class="bg-white p-4 rounded-lg shadow-sm"><div class="camera-view w-5/6 mx-auto h-96 bg-gray-900 rounded-md mb-4 flex items-center justify-center"><video id="enroll-video" autoplay playsinline class="rounded-md hidden"></video><p id="enroll-cam-placeholder" class="text-white">Starting Camera...</p></div><div class="mb-4"><label for="student-name" class="block text-sm font-medium text-gray-700">Student Name</label><input type="text" id="student-name" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md"></div><div class="mb-4"><label for="roll-number" class="block text-sm font-medium text-gray-700">Roll Number</label><input type="text" id="roll-number" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md"></div><button id="enroll-button" class="w-full bg-green-500 text-white p-3 rounded-lg font-semibold hover:bg-green-600">ENROLL</button></div>`;
        // Teacher - Attendance
        document.getElementById('attendance-screen').innerHTML = `<h1 class="text-2xl font-bold text-gray-800 mb-4">Take Attendance</h1><div class="bg-white p-4 rounded-lg shadow-sm"><div class="camera-view w-5/6 mx-auto h-96 bg-gray-900 rounded-md mb-4 flex items-center justify-center"><video id="attendance-video" autoplay playsinline class="rounded-md hidden"></video><div id="scan-line-container" class="hidden h-full w-full absolute top-0 left-0 overflow-hidden"><div class="scan-line"></div></div><p id="attendance-cam-placeholder" class="text-white">Starting Camera...</p></div><button id="scan-button" class="w-full bg-indigo-600 text-white p-3 rounded-lg font-semibold hover:bg-indigo-700"><i class="fas fa-qrcode mr-2"></i>MARK ATTENDANCE</button><div id="attendance-results" class="mt-4 hidden"><h2 class="font-bold text-lg">Results: <span id="scan-status" class="font-normal text-gray-600"></span></h2><div id="present-list" class="mt-2"></div></div></div>`;
        // Teacher - Students List
        document.getElementById('students-screen').innerHTML = `<h1 class="text-2xl font-bold text-gray-800 mb-4">Enrolled Students</h1><div id="students-list" class="space-y-3"></div>`;
        // Teacher - Records
        document.getElementById('records-screen').innerHTML = `<h1 class="text-2xl font-bold text-gray-800 mb-4">Attendance Records</h1><button id="clear-records-btn" class="w-full bg-red-500 text-white p-3 rounded-lg font-semibold hover:bg-red-600 mb-4 flex items-center justify-center"><i class="fas fa-trash-alt mr-2"></i>Clear All Records</button><div id="records-list" class="space-y-3"></div>`;
        // Teacher - Navigation
        document.querySelector('#teacher-module nav').innerHTML = `<button onclick="app.navigate('home-screen')" class="nav-btn flex-1 p-3 text-center text-indigo-600"><i class="fas fa-home text-xl"></i><span class="text-xs block">Home</span></button><button onclick="app.navigate('enroll-screen')" class="nav-btn flex-1 p-3 text-center text-gray-500"><i class="fas fa-user-plus text-xl"></i><span class="text-xs block">Enroll</span></button><button onclick="app.navigate('students-screen')" class="nav-btn flex-1 p-3 text-center text-gray-500"><i class="fas fa-users text-xl"></i><span class="text-xs block">Students</span></button><button onclick="app.navigate('attendance-screen')" class="nav-btn flex-1 p-3 text-center text-gray-500"><i class="fas fa-camera text-xl"></i><span class="text-xs block">Attendance</span></button><button onclick="app.navigate('records-screen')" class="nav-btn flex-1 p-3 text-center text-gray-500"><i class="fas fa-list-alt text-xl"></i><span class="text-xs block">Records</span></button>`;
        
        // Student - Enrollment
        document.getElementById('student-enroll-screen').innerHTML = `
            <div>
                 <button onclick="app.studentNavigate('student-login-screen')" class="text-indigo-600 mb-4 inline-block hover:underline"><i class="fas fa-arrow-left mr-2"></i>Back to Login</button>
                <h1 class="text-2xl font-bold text-gray-800 mb-4">New Student Enrollment</h1>
                <div class="bg-white p-4 rounded-lg shadow-sm">
                    <div class="camera-view w-5/6 mx-auto h-96 bg-gray-900 rounded-md mb-4 flex items-center justify-center">
                        <video id="student-enroll-video" autoplay playsinline class="rounded-md hidden"></video>
                        <p id="student-enroll-cam-placeholder" class="text-white">Starting Camera...</p>
                    </div>
                    <div class="mb-4"><label for="student-enroll-name" class="block text-sm font-medium text-gray-700">Your Full Name</label><input type="text" id="student-enroll-name" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md"></div>
                    <div class="mb-4"><label for="student-enroll-roll" class="block text-sm font-medium text-gray-700">Your Roll Number</label><input type="text" id="student-enroll-roll" class="mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md"></div>
                    <button id="student-enroll-btn" class="w-full bg-green-500 text-white p-3 rounded-lg font-semibold hover:bg-green-600">ENROLL ME</button>
                </div>
            </div>;
    }
};

window.addEventListener('DOMContentLoaded', () => app.init());
</script>

</body>
</html>